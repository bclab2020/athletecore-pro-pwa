# 📱 AthleteCore Pro - AI姿勢分析システム PWA

## 🎯 プロジェクト概要

AthleteCore Proは次世代アスリートのための高度AI姿勢分析システムのPWA（Progressive Web App）です。スマートフォンでネイティブアプリのように動作し、オフライン対応、インストール可能、プッシュ通知対応のWebアプリケーションです。スポーツパフォーマンス向上を目的とした静的・動的姿勢分析機能を提供し、競技特化型の詳細な評価とカスタマイズされた改善提案を行います。

## 📱 PWA機能

### 🌟 Progressive Web App特徴
- **インストール可能**: ホーム画面にアイコン追加、ネイティブアプリ体験
- **オフライン動作**: インターネット接続なしでも基本機能が利用可能
- **プッシュ通知**: 分析結果や更新情報をリアルタイム通知
- **自動更新**: 新しいバージョンの自動検出・更新
- **ハプティクス**: 振動フィードバックによる操作感向上
- **レスポンシブ**: スマートフォンに最適化されたUI/UX

### 🔧 技術的PWA実装
- **Service Worker**: キャッシュ戦略とオフライン機能
- **Web App Manifest**: アプリメタデータとインストール設定
- **Cache API**: 静的リソースとAPIレスポンスのキャッシュ
- **Background Sync**: オフライン時のデータ同期
- **Web Share API**: ネイティブ共有機能との統合

## 🚀 現在実装されている機能

### ✅ 完了済み機能

**⭐ 最新更新 2025-01-09: 革新的マルチモーダル・フィードバックシステム実装完了**

Web Speech APIの信頼性問題を解決するため、**視覚・音響・触覚の3重フィードバック**による次世代カウントダウンシステムを実装しました：

- **🎨 劇的な視覚効果**: カウントダウン数字が緑→黄→赤に変化、パルス・アニメーション、プログレスバー表示
- **🎵 Web Audio API**: ブラウザ制限に依存しない確実なビープ音生成（カウント別周波数調整）
- **📳 高度なハプティクス**: カウント状況に応じた振動パターン（通常脈・緊急パターン）
- **🔊 音声サポート**: 従来のWeb Speech API（利用可能時）をサブシステムとして保持

**ユーザー設定変更不要で、すべての環境で確実にフィードバックが得られます。**

1. **🤖 MediaPipe AI骨格認証・動作認識** ⭐ 2025-01-09 英語音声カウントダウン機能完成
   - リアルタイム人体骨格検出とトラッキング
   - 33個の主要関節点による高精度姿勢分析
   - 静的姿勢分析（頭部前方位置、肩高さ、骨盤バランス）
   - 動的動作認識（スクワット検出、フォーム評価、反復カウント）
   - **Canvas骨格可視化強化**: 超明るい色・太い線・大きな関節点での確実な描画
   - **セルフ撮影対応**: 静的分析5秒カウントダウン + 動的分析自動動作認識
   - **🎬 フルスクリーン撮影**: 撮影時に自動フルスクリーン表示・ヘッダー/フッター非表示
   - **📱 フローティングボタン**: 撮影ボタンが透明オーバーレイとして表示・高度なUI/UX
   - **🔊 マルチモーダルカウントダウン**: 視覚・音響・触覚の3重フィードバックシステム
     - **✨ 劇的な視覚効果**: 大型カウントダウン数字・動的色変化・パルスアニメーション・プログレスバー
     - **🎵 Web Audio API音響**: 確実なビープ音・カウントダウン別周波数・成功チャイム
     - **📳 ハプティクス強化**: カウント別振動パターン・緊急時特別パターン
     - **🗣️ 音声サポート**: Web Speech API（フロントカメラ時）10秒カウントダウン「10,9,8...1,OK!」
   - **インカメラ最適化**: ハプティクス・フラッシュ・録画タイマー完備
   - **可視化デバッグ強化**: 詳細なコンソールログと描画確認機能
   - 直接フレーム処理方式でCamera依存を削除（30FPS）
   - 角度計算・バランス評価・可動域測定
   - 非同期初期化とエラーハンドリング強化
   - モバイル最適化による軽量高速処理
   - **デスクトップ・モバイル両対応**: GitHub環境・スマートフォンChrome両方で完全動作確認済み

2. **📷 カメラシステム** ⭐ 2025-01-08 修正完了
   - 前面/背面カメラ切り替え（自動復帰問題を解決）
   - より厳密なカメラ制約設定（exact → ideal フォールバック）
   - 実際のカメラ設定に基づくUI更新
   - ビデオストリーム準備完了を待つ改善されたタイミング制御
   - ハプティクスフィードバック対応

3. **🎯 クロスプラットフォーム対応** ⭐ 2025-01-08 モバイル互換性完全修正
   - **デスクトップChrome**: GitHub環境での完全動作確認
   - **モバイルChrome**: スマートフォンでの「Get Started」ボタン反応問題を完全解決
   - **タッチイベント**: モバイル固有の操作性を大幅改善
   - **レスポンシブレイアウト**: 全画面でsafe-area-insetの適切な処理
   - **PWA機能**: デスクトップ・モバイル両環境でのネイティブ体験実現

4. **ユーザープロフィール管理**
   - 基本情報（名前、年齢、身長、体重）の登録
   - 主要競技と経験レベルの設定
   - RESTful APIを使用したデータ永続化

5. **モバイルファーストUI/UX**
   - iPhoneライクなモバイルアプリインターフェース
   - 日英バイリンガル対応
   - スムーズなページ遷移アニメーション

4. **AI姿勢分析機能** ⭐ ENHANCED
   - **MediaPipe統合**: Google MediaPipeによる高精度骨格検出
   - **静的姿勢分析**: 立位での姿勢評価（頭部前方位置、肩高バランス、骨盤角度）
   - **動的動作分析**: スクワット検出・フォーム評価・反復カウント
   - **競技特化分析**: 5競技（サッカー、バスケ、野球、卓球、バレー）対応
   - **リアルタイム計測**: 角度計算、バランス評価、可動域測定
   - **AI推奨**: 個別化された改善提案とトレーニング指導

5. **リアルタイムカメラ統合**
   - WebRTC技術を使用した実際のカメラ映像表示
   - フロントカメラでの姿勢確認機能
   - プライバシーに配慮したローカル処理

5. **高度な分析結果表示**
   - Chart.jsを使用したレーダーチャート可視化
   - 総合スコア（0-100点）と詳細評価
   - 競技別カスタマイズされた改善提案

6. **分析履歴管理**
   - 過去の分析結果の保存・表示
   - 日付別履歴表示
   - パフォーマンス推移の追跡

7. **PWAネイティブ機能**
   - スマートフォンホーム画面へのインストール
   - オフライン分析機能（基本機能）
   - バックグラウンド同期とデータ保存
   - ハプティクスフィードバック（振動）
   - オンライン/オフライン状態の表示

### 🤖 AI技術仕様

#### MediaPipe Pose統合
- **33関節点検出**: 高精度な人体骨格認識
- **リアルタイム処理**: 60fps対応による滑らかな描画
- **モバイル最適化**: 軽量モデル使用による高速処理
- **精度閾値**: 検出信頼度30-50%で幅広い環境対応

#### 姿勢分析アルゴリズム
- **角度計算**: 3点間ベクトル演算による関節角度測定
- **バランス評価**: 重心偏移計算による安定性スコア
- **対称性分析**: 左右差測定による不均衡検出
- **フォーム評価**: 動作品質の多次元評価システム

#### 動作認識エンジン
- **スクワット検出**: 膝角度と腰高による位相判定
- **反復カウント**: 動作サイクルの自動認識
- **フォーム採点**: リアルタイム品質評価とフィードバック

### 📊 評価指標

- **Hip Flexibility (股関節柔軟性)**: 0-100点
- **Postural Stability (姿勢安定性)**: 0-100点  
- **Dynamic Balance (動的バランス)**: 0-100点
- **Movement Quality (動作品質)**: 0-100点
- **Overall Score (総合スコア)**: 0-100点

## 🎯 機能的エントリーURI

### メイン画面遷移
- `/` - スプラッシュスクリーン
- `#welcome` - ウェルカム画面
- `#registration` - ユーザー登録
- `#dashboard` - メインダッシュボード
- `#static-analysis` - 静的姿勢分析
- `#dynamic-analysis` - 動的動作分析
- `#results` - 分析結果表示

### RESTful API エンドポイント
- `GET /tables/user_profiles` - ユーザープロフィール一覧取得
- `POST /tables/user_profiles` - 新規ユーザー登録
- `GET /tables/analysis_results` - 分析結果一覧取得
- `POST /tables/analysis_results` - 分析結果保存

## 🏗️ 技術スタック

### フロントエンド
- **HTML5** - セマンティックマークアップ
- **CSS3** - Tailwind CSS フレームワーク
- **JavaScript (ES6+)** - モダンJSでのインタラクティブ機能
- **Chart.js** - データ可視化ライブラリ
- **WebRTC API** - リアルタイムカメラ機能
- **Web Speech API** - 英語音声合成・カウントダウン機能
- **MediaPipe Pose** - Google AI骨格検出ライブラリ

### データ管理
- **RESTful Table API** - データ永続化
- **JSON** - データ構造化とAPI通信
- **Local Storage** - オフラインデータキャッシュ

### AI・分析エンジン
- **MediaPipe Pose Detection** - リアルタイム33関節点検出
- **Canvas 2D API** - 骨格可視化とオーバーレイ描画
- **骨格分析アルゴリズム** - 角度計算・バランス評価・動作認識
- **音声フィードバック** - 自動カウントダウンと状況アナウンス

### デザイン
- **レスポンシブデザイン** - モバイルファースト
- **Google Fonts (Inter)** - モダンタイポグラフィ
- **アニメーション** - CSS3 Transitions & Keyframes

## 📱 対応競技

| 競技 | 特化分析要素 | 主要評価項目 |
|------|-------------|-------------|
| **サッカー** | ボールコントロール、シュート安定性 | 股関節柔軟性、動的バランス |
| **バスケットボール** | ジャンプ着地、コート動作 | 姿勢安定性、動的バランス |
| **野球** | 回転動作、肩甲帯安定性 | 姿勢安定性、股関節分離 |
| **卓球** | 素早い反応、手首安定性 | 姿勢安定性、反応バランス |
| **バレーボール** | 垂直ジャンプ、スパイク動作 | 股関節柔軟性、動的バランス |

## 🗄️ データモデル

### ユーザープロフィール (user_profiles)
```json
{
  "id": "UUID",
  "name": "ユーザー名",
  "age": 25,
  "height": 175,
  "weight": 70,
  "primary_sport": "soccer",
  "experience_level": "intermediate",
  "created_at": "2024-01-01T00:00:00Z"
}
```

### 分析結果 (analysis_results)
```json
{
  "id": "UUID",
  "user_id": "ユーザーID参照",
  "analysis_type": "static",
  "sport": "soccer",
  "overall_score": 85,
  "hip_flexibility": 90,
  "postural_stability": 80,
  "dynamic_balance": 85,
  "recommendations": ["改善提案1", "改善提案2"],
  "analysis_date": "2024-01-01T00:00:00Z"
}
```

## 🔮 今後の開発予定

1. **AIモデル統合**
   - TensorFlow.jsを使用した実際の姿勢認識
   - MediaPipe Poseモデルの実装
   - リアルタイム骨格検出

2. **高度な分析機能**
   - 動画ベースの詳細動作解析
   - 左右差分析（Asymmetry Detection）
   - 経時変化トレンド分析

3. **エクスポート機能**
   - PDF分析レポート生成
   - データエクスポート（CSV/JSON）
   - 分析画像の保存

4. **トレーニング機能**
   - パーソナライズされた改善プログラム
   - 進捗追跡機能
   - リマインダー・通知機能

5. **多言語対応**
   - 韓国語、中国語、英語の完全対応
   - 地域別カスタマイゼーション

## 🎨 デザイン哲学

- **最小限界面 (Minimal Interface)**: 必要な情報のみを明確に表示
- **直感的操作**: 技術的な知識なしに使用可能
- **データ可視化**: 複雑な分析結果を理解しやすく表現
- **アクセシビリティ**: 多様なユーザーに配慮した設計

## 📱 スマートフォンでの使用方法

### インストール手順

1. **ブラウザでアクセス**
   - Chrome/Safari/Edgeで本サイトにアクセス
   - 「アプリをインストール」ボタンをタップ

2. **ホーム画面に追加**
   - iOS: Safariで「ホーム画面に追加」
   - Android: Chromeで「ホーム画面に追加」

3. **ネイティブアプリ体験**
   - ホーム画面のアイコンからアプリを起動
   - フルスクリーン表示でネイティブ感覚の操作

### 主な操作方法
- **タップ**: ボタンや選択項目
- **スワイプ**: 画面遷移時のジェスチャー
- **振動フィードバック**: 操作確認と分析完了通知
- **カメラ許可**: 姿勢分析のためのカメラアクセス許可

## 🚀 デプロイメント

このプロジェクトはPWA対応の静的サイトとして設計されており、以下のプラットフォームでデプロイ可能：

### PWA対応ホスティング
- **Netlify**: 自動HTTPS、Service Worker対応
- **Vercel**: Edge Network配信、高速PWA
- **Firebase Hosting**: Google PWA最適化
- **GitHub Pages**: 無料、カスタムドメイン対応

### 必要ファイル
- `index.html` - メインアプリケーション
- `manifest.json` - PWAマニフェスト
- `service-worker.js` - サービスワーカー
- `README.md` - プロジェクト説明

### HTTPS必須
PWA機能（Service Worker、カメラアクセス）にはHTTPS接続が必要です。

## 📞 お問い合わせ

このデモに関するお問い合わせは、kennyさんの会社サイト [bclab.jp](https://bclab.jp) をご覧ください。

---

**AthleteCore Pro** - 次世代アスリートのためのAI姿勢分析システム  
© 2024 BC Lab. All rights reserved.
